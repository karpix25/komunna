{
  "name": "myapp",
  "services": [
    {
      "name": "postgres",
      "type": "postgres",
      "version": "15",
      "envVars": {
        "POSTGRES_DB": "myapp",
        "POSTGRES_USER": "myapp_user",
        "POSTGRES_PASSWORD": "${POSTGRES_PASSWORD}"
      },
      "volumes": [
        {
          "name": "postgres-data",
          "mountPath": "/var/lib/postgresql/data"
        }
      ]
    },
    {
      "name": "redis",
      "type": "redis",
      "version": "7"
    },
    {
      "name": "backend",
      "type": "app",
      "source": {
        "type": "docker",
        "dockerfilePath": "./backend/Dockerfile"
      },
      "domains": [
        {
          "name": "api.yourdomain.com"
        }
      ],
      "envVars": {
        "DATABASE_URL": "postgresql://myapp_user:${POSTGRES_PASSWORD}@postgres:5432/myapp",
        "REDIS_URL": "redis://redis:6379"
      },
      "ports": [
        {
          "published": 8000,
          "target": 8000
        }
      ]
    },
    {
      "name": "frontend",
      "type": "app",
      "source": {
        "type": "docker",
        "dockerfilePath": "./frontend/Dockerfile"
      },
      "domains": [
        {
          "name": "yourdomain.com"
        }
      ],
      "envVars": {
        "NEXT_PUBLIC_API_URL": "https://api.yourdomain.com"
      },
      "ports": [
        {
          "published": 3000,
          "target": 3000
        }
      ]
    },
    {
      "name": "bot",
      "type": "app",
      "source": {
        "type": "docker",
        "dockerfilePath": "./bot/Dockerfile"
      },
      "envVars": {
        "BOT_TOKEN": "${BOT_TOKEN}",
        "API_URL": "https://api.yourdomain.com",
        "DATABASE_URL": "postgresql://myapp_user:${POSTGRES_PASSWORD}@postgres:5432/myapp"
      }
    }
  ]
}
